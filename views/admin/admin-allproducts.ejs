<section class="content-main">
    <div class="content-header">
        <div>
            <h2 class="content-title card-title">Products List </h2>
            <p>List of all available EazyMart Products.</p>
        </div>
    </div>
    <div class="card mb-4">
        
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover  align-middle  table-striped dt-responsive nowrap" id="myTable">
                    <thead>
                        <tr>
                            <th>#ID</th>
                            <th scope="col">Product Title</th>
                            <th scope="col">Product Category</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Stock Status</th>
                            <th scope="col">Image</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% products.forEach((product,index) => {%>
                            <tr>
                            <td><%=index + 1%></td>
                            <td><%=product.ProductTitle %></td>
                            <td><%=product.ProductCategory %></td>
                            <td><%=product.ProductQuantity%></td>
                            <td id="statusID">
                                <% if (product.ProductStockStatus ==="available") { %><span class="badge rounded-pill alert-success"><%=product.ProductStockStatus  %></span>
                                <%}else { %><span class="badge rounded-pill alert-danger"><%=product.ProductStockStatus  %></span>
                                <%} %>
                            </td >
                            <td style="vertical-align: middle; padding: 0;"><img src="/images/products_image/<%=product.ProductImages[0] %>" alt="" style="width: 40px;"></td>
                            <td><a href="/admin/editproduct/<%=product._id %>" class="btn btn-sm rounded btn-primary font-sm edit-product" onclick="editProduct(event)">Edit</a>
                                <% if (product.IsDeleted) { %>
                                    <a href="/admin/deleteproduct/<%=product._id%>" class="btn btn-sm rounded btn-success font-sm" id="blockButton" onclick="enableProduct(event)">Enable</a>
                                <% }else{%>
                                    <a href="/admin/deleteproduct/<%=product._id%>" class="btn btn-sm rounded btn-danger font-sm" id="blockButton" onclick="disableProduct(event)">Disable</a>
                                <%}%>
                            </td>
                        </tr>
                        <% }); %>
                        
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
</section>
<script>
function editProduct(event) {
  // Prevent the default behavior of the edit button
  event.preventDefault();

  // Display a SweetAlert confirmation box
  Swal.fire({
    title: 'Are you sure you want to edit this product?',
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#3085d6',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Yes',
    cancelButtonText: 'Cancel'
  }).then((result) => {
    // If the user clicks on "Yes", redirect them to the edit product page
    if (result.isConfirmed) {
      window.location.href = event.target.href;
    }
  });
}
function disableProduct(event){
      // Prevent the default behavior of the edit button
  event.preventDefault();

// Display a SweetAlert confirmation box
Swal.fire({
  title: 'Are you sure you want to disable this product?',
  icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  confirmButtonText: 'Yes',
  cancelButtonText: 'Cancel'
}).then((result) => {
  // If the user clicks on "Yes", redirect them to the edit product page
  if (result.isConfirmed) {
    window.location.href = event.target.href;
  }
});
}
function enableProduct(event){
      // Prevent the default behavior of the edit button
  event.preventDefault();

// Display a SweetAlert confirmation box
Swal.fire({
  title: 'Are you sure you want to enable this product?',
  icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  confirmButtonText: 'Yes',
  cancelButtonText: 'Cancel'
}).then((result) => {
  // If the user clicks on "Yes", redirect them to the edit product page
  if (result.isConfirmed) {
    window.location.href = event.target.href;
  }
});
}

</script>